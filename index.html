<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />
  <title>SK ‚Äì Private OTT</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Simple password gate (NOT real security) -->
  <div id="lock-screen" class="lock-screen">
    <div class="lock-card">
      <h1>SK üîê</h1>
      <p>Private access only</p>
      <input
        type="password"
        id="access-code"
        placeholder="Enter access code"
      />
      <button id="unlock-btn">Unlock</button>
      <p id="lock-error" class="error-msg"></p>
    </div>
  </div>

  <!-- Main app -->
  <div id="app" class="app hidden">
    <header class="header">
      <div class="logo">
        <span class="logo-main">SK</span>
        <span class="logo-sub">Private OTT</span>
      </div>

      <div class="header-right">
        <input
          type="text"
          id="search-input"
          placeholder="Search movies..."
          class="search-input"
        />
        <button id="reload-btn" class="reload-btn" title="Reload from movies.json">
          ‚ü≥
        </button>
        <button id="admin-toggle" class="admin-btn">
          Admin
        </button>
      </div>
    </header>

    <main class="main">
      <section class="filters">
        <select id="genre-filter" class="filter-select">
          <option value="">All genres</option>
          <option value="Action">Action</option>
          <option value="Drama">Drama</option>
          <option value="Comedy">Comedy</option>
          <option value="Romance">Romance</option>
          <option value="Sci-Fi">Sci-Fi</option>
          <option value="Thriller">Thriller</option>
          <option value="Horror">Horror</option>
          <option value="Documentary">Documentary</option>
          <option value="Animation">Animation</option>
          <option value="Sports">Sports</option>
          <option value="Other">Other</option>
        </select>
      </section>

      <!-- Admin Panel -->
      <section id="admin-panel" class="admin-panel hidden">
        <h2>Admin ‚Äì Add / Edit Library</h2>
        <p class="admin-hint">
          1) Upload video to <strong>Google Drive</strong> ‚Üí get share link<br />
          2) Use this form to create entries and manage your list<br />
          3) Finally copy the full JSON and paste into <code>movies.json</code> in GitHub to save permanently.
        </p>

        <!-- Add movie form -->
        <form id="admin-form" class="admin-form">
          <div class="form-row">
            <label for="admin-title">Title</label>
            <input type="text" id="admin-title" required />
          </div>

          <div class="form-row two-col">
            <div>
              <label for="admin-year">Year</label>
              <input
                type="number"
                id="admin-year"
                min="1900"
                max="2100"
                value="2025"
              />
            </div>
            <div>
              <label for="admin-genre">Genre</label>
              <select id="admin-genre">
                <option value="">Select genre</option>
                <option value="Action">Action</option>
                <option value="Drama">Drama</option>
                <option value="Comedy">Comedy</option>
                <option value="Romance">Romance</option>
                <option value="Sci-Fi">Sci-Fi</option>
                <option value="Thriller">Thriller</option>
                <option value="Horror">Horror</option>
                <option value="Documentary">Documentary</option>
                <option value="Animation">Animation</option>
                <option value="Sports">Sports</option>
                <option value="Other">Other (custom)</option>
              </select>
            </div>
          </div>

          <div class="form-row hidden" id="custom-genre-row">
            <label for="admin-genre-custom">Custom genre (for "Other")</label>
            <input
              type="text"
              id="admin-genre-custom"
              placeholder="Eg: Fantasy, Biopic, etc."
            />
          </div>

          <div class="form-row">
            <label for="admin-desc">Description</label>
            <textarea
              id="admin-desc"
              rows="3"
              placeholder="Short description..."
            ></textarea>
          </div>

          <div class="form-row">
            <label for="admin-thumb">Thumbnail URL</label>
            <input
              type="text"
              id="admin-thumb"
              placeholder="https://... (poster image URL)"
            />
            <small class="hint">
              Tip: Use https://via.placeholder.com/300x450?text=My+Movie or a direct image URL.
            </small>
            <div class="thumb-preview-wrapper">
              <div class="thumb-preview-label">Preview:</div>
              <img id="thumb-preview" class="thumb-preview" alt="Thumbnail preview" />
            </div>
          </div>

          <div class="form-row">
            <label for="admin-source">Google Drive link or File ID</label>
            <input
              type="text"
              id="admin-source"
              placeholder="Drive share link or file id"
              required
            />
            <small class="hint">
              Must be a video (e.g. MP4) with Drive sharing set to "Anyone with the link ‚Äì Viewer".
            </small>
          </div>

          <div class="form-row">
            <label for="admin-source-preview">Final video URL (auto)</label>
            <input
              type="text"
              id="admin-source-preview"
              readonly
            />
            <small class="hint">
              This is the URL SK uses to play the video. It updates automatically from the Drive link above.
            </small>
          </div>

          <button type="submit" class="admin-submit-btn">
            ‚ûï Add movie to list
          </button>
        </form>

        <!-- Current movies list with delete -->
        <div class="admin-movie-list-block">
          <h3>Current movies in this session</h3>
          <p class="admin-hint">
            Click <strong>Delete</strong> to remove an entry from the list and from the JSON preview below.
            To make it permanent, copy the full JSON and update <code>movies.json</code> in GitHub.
          </p>
          <div id="admin-movie-list" class="admin-movie-list">
            <!-- Filled by JS -->
          </div>
        </div>

        <!-- JSON previews -->
        <div class="admin-output-block">
          <p>
            JSON entry for the last movie you added:
          </p>
          <textarea
            id="admin-output"
            rows="6"
            readonly
            class="admin-output"
          ></textarea>
        </div>

        <div class="admin-output-block">
          <p>
            Full <code>movies.json</code> for your site
            (copy this into your GitHub file to save all changes):
          </p>
          <textarea
            id="admin-output-full"
            rows="10"
            readonly
            class="admin-output"
          ></textarea>
        </div>
      </section>

      <!-- Movie grid -->
      <section id="movie-list" class="movie-grid">
        <!-- Cards rendered by JS -->
      </section>
    </main>
  </div>

  <!-- Player modal -->
  <div id="player-modal" class="modal hidden">
    <div class="modal-content">
      <button id="close-modal" class="close-btn">‚úï</button>

      <div class="modal-layout">
        <div class="player-wrapper">
          <div id="player-loading" class="player-loading hidden">
            <div class="spinner"></div>
            <span>Loading video...</span>
          </div>
          <div id="player-error" class="player-error hidden"></div>
          <video
            id="player-video"
            controls
            playsinline
            preload="metadata"
          ></video>
        </div>

        <div class="player-info">
          <h2 id="player-title"></h2>
          <p id="player-meta" class="player-meta"></p>
          <p id="player-desc" class="player-desc"></p>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
